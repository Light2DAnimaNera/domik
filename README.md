# domik

## Запуск

1. Создайте и активируйте виртуальное окружение.
2. Установите зависимости: `pip install -r requirements.txt`.
3. Создайте файл `.env` и заполните его своими ключами и токенами.
4. Запустите бота: `python bot.py`.

После запуска доступны команды из файла `bot_commands.py`. При вводе `/start` бот отправит приветствие, список команд доступен через меню Telegram. 

Для ведения диалогов предусмотрены сессии:
- `/begin` — начать новую сессию;
- `/end` — завершить текущую и сохранить её краткое описание. После закрытия
  полная история переписки выводится в консоль.
Одновременно может быть только одна активная сессия. Если попытаться начать новую,
пока предыдущая ещё не закрыта, бот ответит: «Что бы начать новую сессию, заверши предыдущую сессию».

Обычные сообщения обрабатываются только при активной сессии. Если её нет, бот
попросит запустить `/begin`.

При завершении сессии бот создаёт конспект по правилам SessionSummarizer v2.
Для генерации используются роли и тексты всех сообщений из базы (`SELECT role, content ...`).
Полный текст диалога также выводится в консоль.

Основная логика общения с GPT и все используемые промпты находятся в модуле
`gpt_client.py`.
